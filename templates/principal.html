<!doctype html>

<html lang="es">

  <head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootswatch/4.5.2/lux/bootstrap.min.css">
  
  <link rel="stylesheet" href="/static/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
  
  <!--<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">-->
  
  
  
  <title>
  Comparador de precios 
  </title>
  
  </head>
  
  
  <body>
  
  
  <br>
  <br>
  <br>
  <br>
  
  <h1 class="titulo display-4 text-center font-weight-bold .text-primary mt-4" >Busca <span class="badge badge-secondary">Precio$</span> </h1>
  
  <br>
  <br>
  <br>
  
  <div>
   <form action="{{ url_for('tabla') }}" method="post">
    <div class="form-group" >
	
	 <div class="d-flex flex-row">
	   <div class="center">  <input  class="form-control" placeholder="Que quieres comprar?" id="txtProducto"  type="text"  name="producto"  aria-describedby="productHelp">   </div>
	 </div>
	 
	 <div class="d-flex justify-content-center">  <button type="submit" class="btn btn-primary">Buscar</button> </div>
	 
    </div>
   </div>
  
</form>
  

  <br>
  
 <div class="table-responsive">
 
 <table  class="table  table-striped  .table-bordered ">
 
  <thead>
    <tr>
      <th scope="col" class="letraTituloTabla">#</th>
      <th scope="col" class="letraTituloTabla" >TIENDA</th>
	  <th scope="col" class="letraTituloTabla">PRODUCTO</th>
      <th scope="col" class="letraTituloTabla">PRECIO</th>

    </tr>
  </thead>
  
  <tbody>
    {% for row in test %}
    <tr>
      <th scope="row">1</th>
	  
	  {% if  row[2]  == "grupoMansion" %}
      <td ><img src="/static/img/Logo-Oficial-Mansion.PNG" alt="tienda" border=3 height=120 width=120></img></th>
	  {% endif %}
	  
	  {% if  row[2]  == "Oportunidades" %}
      <td><img src="/static/img/oportunidades.PNG" alt="tienda" border=3 height=120 width=120></img></th>
	  {% endif %}
	  
	  {% if  row[2]  == "jumbo" %}
      <td><img src="/static/img/jumbo.PNG" alt="tienda" border=3 height=120 width=120></img></th>
	  {% endif %}
	  
      <td class="letraTabla"   > <a href= "{{ row[3] }}" target="_blank"> {{ row[0] }}  </a>  </td>
	  <td class="letraTabla">${{ row[1] }}</td>
    </tr>
	{% endfor %}

  </table>
  </div>
  
  <script>
  
  
  console.log("Estoy dentro");
  var table, rows, switching, i, x, y, shouldSwitch;
  table = document.getElementsByTagName('table')[0];
  switching = true;

  while (switching) {

    switching = false;
    rows = table.rows;

    for (i = 1; i < (rows.length - 1); i++) {

      shouldSwitch = false;

      x = rows[i].getElementsByTagName("TD")[2];
      y = rows[i + 1].getElementsByTagName("TD")[2];
	  
	  
	  x = x.innerHTML.replaceAll('.','').split(",", 1)+ '';
	  y = y.innerHTML.replaceAll('.','').split(",", 1)+ '';
	  
      if (Number(x.substring(1)) > Number(y.substring(1))) {

        shouldSwitch = true;
        break;
      }
    }
    if (shouldSwitch) {

      rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
      switching = true;
	 
    }
  }

  
  </script>
  
    <script>
  
  var table = document.getElementsByTagName('table')[0],
  rows = table.getElementsByTagName('tr'),
  text = 'textContent' in document ? 'textContent' : 'innerText';

  for (var i = 1, len = rows.length; i < len; i++) {
  rows[i].children[0][text] = i;
  }
  
  </script>
  
  
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
  </body>


</html>